<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <script src="../../static/assets/global/plugins/jquery.min.js" type="text/javascript"></script>
    <!-- BEGIN PAGE LEVEL PLUGINS -->
    <script src="../../static/assets/global/plugins/fancybox/source/jquery.fancybox.pack.js" type="text/javascript"></script>
    <script src="../../static/assets/global/plugins/jquery-file-upload/js/vendor/jquery.ui.widget.js"
            type="text/javascript"></script>
    <script src="../../static/assets/global/plugins/jquery-file-upload/js/vendor/tmpl.min.js" type="text/javascript"></script>
    <script src="../../static/assets/global/plugins/jquery-file-upload/js/vendor/load-image.min.js"
            type="text/javascript"></script>
    <script src="../../static/assets/global/plugins/jquery-file-upload/js/vendor/canvas-to-blob.min.js"
            type="text/javascript"></script>
    <script src="../../static/assets/global/plugins/jquery-file-upload/blueimp-gallery/jquery.blueimp-gallery.min.js"
            type="text/javascript"></script>
    <script src="../../static/assets/global/plugins/jquery-file-upload/js/jquery.iframe-transport.js"
            type="text/javascript"></script>
    <script src="../../static/assets/global/plugins/jquery-file-upload/js/jquery.fileupload.js"
            type="text/javascript"></script>
    <script src="../../static/assets/global/plugins/jquery-file-upload/js/jquery.fileupload-process.js"
            type="text/javascript"></script>
    <script src="../../static/assets/global/plugins/jquery-file-upload/js/jquery.fileupload-image.js"
            type="text/javascript"></script>
    <script src="../../static/assets/global/plugins/jquery-file-upload/js/jquery.fileupload-audio.js"
            type="text/javascript"></script>
    <script src="../../static/assets/global/plugins/jquery-file-upload/js/jquery.fileupload-video.js"
            type="text/javascript"></script>
    <script src="../../static/assets/global/plugins/jquery-file-upload/js/jquery.fileupload-validate.js"
            type="text/javascript"></script>
    <!--<script src="../static/assets/global/plugins/jquery-file-upload/js/jquery.fileupload-ui.js"
            type="text/javascript"></script>-->
    <!-- END PAGE LEVEL PLUGINS -->
</head>
<body>
<form action="">
<input id="fileupload" type="file" name="files[]" data-url="server/php/" multiple>
<button type="submit">上传</button>
</form>
<div>
    <img id="image" src="" style="max-height: 50px">
    <p id="name"></p>
    <p id="asda">文件上传</p>
</div>
<script>
    //获取图片地址
    function getUrl(file) {
        var url = null;
        if (window.createObjectURL != undefined) {
            url = window.createObjectURL(file);
        } else if (window.URL != undefined) {
            url = window.URL.createObjectURL(file);
        } else if (window.webkitURL != undefined) {
            url = window.webkitURL.createObjectURL(file);
        }
        return url;
    }

    $(function(){
       /* $("#fileupload").click(function(){
            alert(1)
        });*/

        $("#fileupload").fileupload({
            showDone: false,                     //是否显示"Done"(完成)按钮
            showDelete: true,                  //是否显示"Delete"(删除)按钮
            progressall:function (e,data) {
                var press=parseInt(data.load/data.total*100,10);
                $("#asda").html("全量包正在上传:"+progress + '%');
                $("#asda").append("<span id='asd' style='background-color:#117bed;display:block;height:20px;'></span>");
                $('#asd').css('width', progress + '%');
                if(progress==100){
                    $("#asda").html("全量包上传完成!");
                    $('#asd').remove();
                }
            }
        }).on("fileuploadadd", function(e, data) {
            debugger
            //获取图片路径并显示
            var url = getUrl(data.files[0]);
            $("#name").append(data.files[0].name)
            $("#image").attr("src", url);

        });

    });
</script>

</body>
</html>